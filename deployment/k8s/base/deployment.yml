apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: malware-scanner-service
  namespace: malware-scan
  labels:
    department: logistics
    app: malware-scanner-service
    component: api-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app: malware-scanner-service
  template:
    metadata:
      labels:
        app: malware-scanner-service
        project: selfservice
        department: logistics
    spec:
      volumes:
      - name: shared-data
        emptyDir: {}
      containers:
      - name: malware-scanner-api
        image: localhost:32000/malware-scan/malware-scanner-service:latest
        ports:
        - containerPort: 8081
          name: main
        volumeMounts:
        - name: shared-data
          mountPath: /app/data/
      - name: malware-scanner
        image: rordi/docker-antivirus
        volumeMounts:
        - name: shared-data
          mountPath: /data/av/