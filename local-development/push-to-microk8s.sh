#!/bin/bash

# build parameters
readonly CAPABILITY_NAME='malware-scan'
readonly IMAGE_NAME="${CAPABILITY_NAME}/malware-scanner-service"
readonly BUILD_NUMBER=${1:-"latest"}

push_container_image(){

    echo "### Tagging container image ###"
    container_registry_image_name="localhost:32000/${IMAGE_NAME}:${BUILD_NUMBER}"

    echo "Tag will be: '${container_registry_image_name}'"
    docker tag ${IMAGE_NAME}:latest ${container_registry_image_name}

    echo "### Pushing container image to container registry ###"
    docker push ${container_registry_image_name}
}


push_container_image